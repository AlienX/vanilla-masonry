/**
 * Vanilla Masonry v1.0
 * A dynamic layout plugin. The flip-side of CSS Floats
 * http://vanilla-masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2011 David DeSandro
 */
(function(a,b){function p(a,b){if(!!a){this.element=a,this.options={};for(var c in p.defaults)this.options[c]=p.defaults[c];for(c in b)this.options[c]=b[c];this._create(),this.build()}}function o(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&(a.detachEvent("on"+b,a[b+c]),a[b+c]=null,a["e"+b+c]=null)}function n(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent&&(b["e"+c+d]=d,b[c+d]=function(){b["e"+c+d](a.event)},b.attachEvent("on"+c,b[c+d]))}function m(a,b,c){var d=b!=="height",e=d?a.offsetWidth:a.offsetHeight,f=d?"Left":"Top",g=d?"Right":"Bottom",i=h(a),j=parseFloat(i["padding"+f])||0,m=parseFloat(i["padding"+g])||0,n=parseFloat(i["border"+f+"Width"])||0,o=parseFloat(i["border"+g+"Width"])||0,p=i["margin"+f],q=i["margin"+g],r,s;k||(p=l(a,i,p),q=l(a,i,q)),r=parseFloat(p)||0,s=parseFloat(q)||0;if(e>0)c?e+=r+s:e-=j+m+n+o;else{e=i[b];if(e<0||e==null)e=a.style[b]||0;e=parseFloat(e)||0,c&&(e+=j+m+r+s+n+o)}return e}function l(a,b,c){if(c.indexOf("%")===-1)return c;var d=a.style,e=d.width,f;d.width=c,f=b.width,d.width=e;return f}function f(a,b){a.className=a.className.replace(c(b)," ")}function e(a,b){d(a,b)||(a.className=a.className+" "+b)}function d(a,b){return c(b).test(a.className)}function c(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}"use strict";var g=document.defaultView,h=g&&g.getComputedStyle?function(a){return g.getComputedStyle(a,null)}:function(a){return a.currentStyle},i=document.getElementsByTagName("body")[0],j=document.createElement("div");j.style.marginTop="1%",i.appendChild(j);var k=h(j).marginTop!=="1%";i.removeChild(j),a.getWH=m;var q=["position","height"];p.defaults={isResizable:!0,gutterWidth:0,isRTL:!1,isFitWidth:!1},p.prototype={_getBricks:function(a){var b;for(var c=0,d=a.length;c<d;c++)b=a[c],b.style.position="absolute",e(b,"masonry-brick"),this.bricks.push(b)},_create:function(){this.reloadItems();var b=this.element.style;this._originalStyle={};for(var c=0,d=q.length;c<d;c++){var f=q[c];this._originalStyle[f]=b[f]||""}this.element.style.position="relative",this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={};var g=h(this.element),i=this.options.isRTL?"paddingRight":"paddingLeft";this.offset.y=parseFloat(g.paddingTop)||0,this.offset.x=parseFloat(g[i])||0,this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var j=this;setTimeout(function(){e(j.element,"masonry")}),this.options.isResizable&&n(a,"resize",function(){j._handleResize()})},build:function(a){this._getColumns(),this._reLayout(a)},_getColumns:function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,b=m(a,"width");this.columnWidth=this.isFluid?this.options.columnWidth(b):this.options.columnWidth||m(this.bricks[0],"width",!0)||b,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((b+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},reloadItems:function(){this.bricks=[],this._getBricks(this.element.children)},_reLayout:function(a){var b=this.cols;this.colYs=[];while(b--)this.colYs.push(0);this.layout(this.bricks,a)},layout:function(a,b){var c,d,e,f,g,h,i;for(var j=0,k=a.length;j<k;j++){c=a[j];if(c.nodeType!==1)continue;d=Math.ceil(m(c,"width",!0)/(this.columnWidth+this.options.gutterWidth)),d=Math.min(d,this.cols);if(d===1)i=this.colYs;else{e=this.cols+1-d,i=[];for(h=0;h<e;h++)g=this.colYs.slice(h,h+d),i[h]=Math.max.apply(Math,g)}var l=Math.min.apply(Math,i);for(var n=0,o=i.length;n<o;n++)if(i[n]===l)break;c.style.top=l+this.offset.y+"px",c.style[this.horizontalDirection]=this.columnWidth*n+this.offset.x+"px";var p=l+m(c,"height",!0),q=this.cols+1-o;for(h=0;h<q;h++)this.colYs[n+h]=p}var r={};this.element.style.height=Math.max.apply(Math,this.colYs)+"px";if(this.options.isFitWidth){var s=0;j=this.cols;while(--j){if(this.colYs[j]!==0)break;s++}this.element.style.width=(this.cols-s)*this.columnWidth-this.options.gutterWidth+"px"}b&&b.call(a)},_handleResize:function(){function b(){a.resize(),a._resizeTimeout=null}var a=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(b,100)},resize:function(){var a=this.cols;this._getColumns(),(this.isFluid||this.cols!==a)&&this._reLayout()},reload:function(a){this.reloadItems(),this.build(a)},appended:function(a,b,c){var d=this,e=function(){d._appended(a,c)};if(b){var f=m(this.element,"height")+"px";for(var g=0,h=a.length;g<h;g++)a[g].style.top=f;setTimeout(e,1)}else e()},_appended:function(a,b){this._getBricks(a),this.layout(a,b)},destroy:function(){var b;for(var c=0,d=this.bricks.length;c<d;c++)b=this.bricks[c],b.style.position="",b.style.top="",b.style.left="",f(b,"masonry-brick");var e=this.element.style;d=q.length;for(c=0;c<d;c++){var g=q[c];e[g]=this._originalStyle[g]}f(this.element,"masonry"),this.resizeHandler&&o(a,"resize",this.resizeHandler)}},a.Masonry=p})(window);
